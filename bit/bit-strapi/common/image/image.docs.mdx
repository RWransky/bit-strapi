---
description: 'A Strapi Compatible React/Typescript Image Component'
labels: ['strapi', 'image', 'react', 'typescript', 'lazy loading', 'progressive loading']
---

import { StrapiImage } from './image';
import jpegJSON from './test/image.json';
import highResJSON from './test/highres.json';
import webpJSON from './test/webp.json';
import gifJSON from './test/gif.json';

## React Typescript Component Compatible with Strapi Image Format

`StrapiImage` is an updated extension of [react-strapi-img](https://github.com/AndreasFaust/react-strapi-img), with several critical fixes to support Strapi versions 4+.

### Supported Formats:
- `.jpeg`
- `.png`
- `.tiff`
- `.gif`
- `.ico`
- `.svg`
- `.webp`

### Supported Features:
- Lazy-load images using an interaction observer
- Progressively load high res images using placeholder
- Supports Strapi's autogenerated size formats of `large`, `medium`, `small`, and `thumbnail`

### Component usage
```js
<StrapiImage attributes={StrapiAPIImageAttributes} preserveAspectRatio={false} style={'CSS Styles Override'} />
```

### Prop Types
`style`: `string` (used to define style overrides or additions)

`preserveAspectRatio`: `boolean` (`false` sets image height to `auto` to fill screen)

`attributes`: `Object` (Strapi atttributes object)

-------------------------------------

*Strapi `attributes` Object (adapted from [react-strapi-img](https://github.com/AndreasFaust/react-strapi-img)):*

** only `url` is required **

| **Name**               | **Type** | **Default** | **Description**                                                                                                                                                  |
| :--------------------- | :------- | :---------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **url**                | string   |             | Image-url. Fetch with Strapi.                                                                                                                                    |
| **formats**            | object   |             | Strapi provides a formats-object including up to four different sizes (`large`, `medium`, `small`, and `thumbnail`). Fetch it and insert it here.                                                    |
| **sizes**              | string   |             | sizes-Tag. Help browsers to make better decisions. https://css-tricks.com/a-guide-to-the-responsive-images-syntax-in-html/                                       |
| **objectFit**          | string   | 'cover'     | CSS-property. Useful together with `proportionalHeight`                                                                                                          |
| **objectPosition**     | string   | 'center'    | CSS-property. Useful together with `proportionalHeight`                                                                                                          |
| **width**              | number   |             | Provided by Strapi. Pass it to preserve original image-proportions.                                                                                              |
| **height**             | number   |             | Provided by Strapi. Pass it to preserve original image-proportions.                                                                                              |
| **proportionalHeight** | number   |             | Provide for custom image-proportion. Crops image. Use along with `objectFit` and `objectPosition`.                                                               |
| **placeholder**        | boolean  | `true`      | Show Placeholder (only works if `thumbnail` or `small` format included).                                                                                                                   |
| **rootMargin**         | string   | 50px        | Used by `Intersection Observer` to determine distance from viewport, when the image should be loaded                                                             |
| **threshold**          | number   | 0           | Value between `0` and `1`. Used by `Intersection Observer` to indicate at what percentage of the target's visibility the observer's callback should be executed. |
| **alternativeText**    | string   |             | `alt`-Attribute of the image. Provided by `Strapi`. Pass it for good SEO.                                                                                        |
| **className**          | string   |             | Custom className for the wrapping `div`-tag.                                                                                                                     |
| **style**              | string   |             | Custom styles for **wrapper**. `styled-components` template-literal.                                                                                             |
| **stylePlaceholder**   | string   |             | Custom styles for **placeholder-img**. `styled-components` template-literal                                                                                      |
| **styleImg**           | string   |             | Custom styles for **img-tag**. `styled-components` template-literal                                                                                              |
| **prefix**             | string   |             | Prefix all src and srcset.                                                                                                                                       |
| **onLoad**             | function |             | Image-`onLoad`-callback.                                                                                                                                         |
| **onError**            | function |             | Image-`onError`-callback.                                                                                                                                        |


### Live Example
```js live
/*
	The below examples represent how data is returned via Strapi's API.
	Using one of the available JSON examples, change the `attributes` property in the `StrapiImage` component
	to see a different image!

	Available examples:
	- gifJSON
	- jpegJSON
	- highResJSON
	- webpJSON

	Or try modifying the style override below!
*/

<StrapiImage 
	attributes={gifJSON.data.attributes} 
	style={`
	  img {
	  	border: 5px solid #555;
	  }
	`}
/>
```
